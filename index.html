<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Карта аномалий</title>
  <link href="style.css" rel="stylesheet">
</head>
<body>
  <center>
    <div id="mapDiv">
      <img draggable="false" src="map.png" id="map">
    </div>
    <div>
      <input id="idd" placeholder="ID детектора" type="text" class="input_to_form" required>
      <input id="xd" placeholder="X" required type="number"  class="input_to_form">
      <input id="yd" placeholder="Y" required type="number"  class="input_to_form">
      <br>
      <button onclick="putDetector(document.getElementById('idd').value, Number(document.getElementById('xd').value), Number(document.getElementById('yd').value))" class="submit_button">Добавить</button>
    </div>
    <br><br><br>
    <div>
      <input id="idds" placeholder="ID детектора" type="text" class="input_to_form" required>
      <input id="ids" placeholder="ID аномалии" type="text" class="input_to_form" required>
      <input id="rates" placeholder="Интенсивность" required type="number"  class="input_to_form">
      <br>
      <button onclick="putSwan(document.getElementById('idds').value, document.getElementById('ids').value, Number(document.getElementById('rates').value))" class="submit_button">Добавить</button>
    </div>
    <br><br><br>
    <button onclick="detectors={}" class="submit_button">Очистить</button>
  </center>
  <script src="main.js">
  </script>
  <script>
    class Detector{
      constructor(opts){
        this.x = opts.x
        this.y = opts.y
        this.id = opts.id
        this.swans = opts.swans
      }
    }
    class Swan{
      constructor(opts){
          this.id = opts.id
          this.rate = opts.rate
          this.x = opts.x
          this.y = opts.y
          this.g = null
          this.values = []
      }

      get_coords_and_intensive(values){
          //математика Рустама
      }

      update_values(x, y, g){
          this.values.append((x, y, g))
          if (this.values.length === 3)
              this.get_coords_and_intensive(this.values)
      }
  }
    let detectors = {}
    function putDetector(id, x, y){
      detectors[id] = (new Detector({id: id, x: x, y: y, swans: {}}))
    }
    function putSwan(idd, id, rate){
      detectors[idd].swans[id] = new Swan({id: id, rate: rate, x: detectors[idd].x, y: detectors[idd].y})
    }
  </script>
</body>
</html>
